!function(a){a.Redactor.prototype.replacer=function(){return{getTemplate:function(){return String()+'<form id="redactor-modal-replacer"><section><p>Search and replace found text.</p><div><label>Search</label><input type="text" size="5" value="" id="redactor-replacer-find" required /></div><div><label>Replace</label><input type="text" size="5" value="" id="redactor-replacer-replace" required /></div><div class="options"><div class="ignore-case"><label>Ignore Case</label><input type="checkbox" id="redactor-replacer-ignore-case" /></div></div><footer><button id="redactor-modal-button-action" type="submit">Replace</button><button id="redactor-modal-button-cancel">Cancel</button></footer></section></form>'},init:function(){a.extend(this.opts.shortcuts,{"ctrl+f":{func:"replacer.show",params:[]}})},show:function(){var b=this;this.modal.addTemplate("replacer",this.replacer.getTemplate()),this.modal.load("replacer",this.lang.get("replacer")||"Replacer",400),a("#redactor-modal-replacer").submit(function(a){a.preventDefault(),b.replacer.replace()}),this.sel&&this.sel.toString()&&(a("#redactor-replacer-find").val(this.sel.toString()),a("#redactor-replacer-replace").focus()),this.selection.save(),this.modal.show(),a("#redactor-modal-replacer").focus()},replace:function(){function b(a,b,c,d){return c.replace(a instanceof RegExp?a:new RegExp(a,d),b)}var c=a("#redactor-replacer-find").val(),d=a("#redactor-replacer-replace").val(),e=a("#redactor-replacer-ignore-case").is(":checked");c&&d&&this.insert.set(b(c,d,this.code.get(),"g"+(e?"i":""))),this.modal.close(),this.selection.restore()}}}}(jQuery);