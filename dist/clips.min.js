if(!RedactorPlugins)var RedactorPlugins={};!function(a){RedactorPlugins.clips=function(){return{init:function(){if(this.opts.clipsJson){if("string"==typeof this.opts.clipsJson)try{this.clips.json=a.parseJSON(this.opts.clipsJson)}catch(b){return!1}this.clips.json||(this.clips.json=this.opts.clipsJson);var c=this.clips.json;this.clips.template=a('<ul id="redactor-modal-list">');for(var d=0;d<c.length;d++){var e=a("<li>"),f=a('<a href="#" class="redactor-clip-link">').text(c[d].title),g=a('<div class="redactor-clip">').hide().html(c[d].clip);void 0!==c[d].advanced&&"false"!==c[d].advanced&&c[d].advanced!==!1&&a(g).attr("data-advanced","1"),e.append(f),e.append(g),this.clips.template.append(e)}this.modal.addTemplate("clips","<section>"+this.utils.getOuterHtml(this.clips.template)+"</section>");var h=this.button.add("clips","Clips");this.button.addCallback(h,this.clips.show)}},show:function(){this.modal.load("clips","Insert Clips",400),this.modal.createCancelButton(),a("#redactor-modal-list").find(".redactor-clip-link").each(a.proxy(this.clips.load,this)),this.selection.save(),this.modal.show()},load:function(b,c){a(c).addClass("loaded"),a(c).on("click",a.proxy(function(b){b.preventDefault(),this.clips.insert(a(c).next().html(),"1"==a(c).next().attr("data-advanced"))},this))},insert:function(a,b){this.selection.restore(),b?this.insert.htmlWithoutClean(a):this.insert.html(a,!0),this.modal.close(),this.observe.load()}}}}(jQuery);