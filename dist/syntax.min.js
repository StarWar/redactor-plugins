!function(a){a.Redactor.prototype.syntax=function(){return{offlineMode:!1,editor:null,prettyContent:null,init:function(){var b=this;void 0===b.opts.aceLoaded&&(b.opts.aceLoaded=!1),b.opts.aceLoaded||(this.opts=a.extend({aceUseSoftTabs:!0,aceTabSize:4,aceUseWrapMode:!0,aceHighlightActiveLine:!0,aceReadOnly:!1},this.opts),"undefined"==typeof ace?(b.syntax.offlineMode=!0,a.getScript(b.opts.aceOfflineSource,function(){b.syntax.handleLoaded()})):b.syntax.handleLoaded())},handleLoaded:function(){var b=this,c=b.$textarea;b.$textarea.after('<div class="redactor__modx-code-pretty-content" rows="4" style="display:none"></div>'),b.syntax.prettyContent=b.$textarea.parent().children("div.redactor__modx-code-pretty-content").attr("id","redactor__modx-code-pretty-content"+b.uuid),b.opts.aceOfflineSource&&(ace.config.set("modePath",b.opts.assetsUrl+"lib/ace/"),ace.config.set("workerPath",b.opts.assetsUrl+"lib/ace/"),ace.config.set("themePath",b.opts.assetsUrl+"lib/ace/")),b.syntax.editor=ace.edit("redactor__modx-code-pretty-content"+b.uuid);var d=b.syntax.editor;d.setTheme(b.opts.aceTheme||"ace/theme/chrome"),d.getSession().setMode(b.opts.aceMode||"ace/mode/html"),d.getSession().setUseWorker(b.opts.useWorkers||!1),d.setValue(c.val()),void 0!==b.opts.aceUseSoftTabs&&d.getSession().setUseSoftTabs(b.opts.aceUseSoftTabs),void 0!==b.opts.aceTabSize&&parseInt(b.opts.aceTabSize)&&d.getSession().setTabSize(parseInt(b.opts.aceTabSize)),void 0!==b.opts.aceUseWrapMode&&d.getSession().setUseWrapMode(b.opts.aceUseWrapMode),void 0!==b.opts.aceHighlightActiveLine&&d.setHighlightActiveLine(b.opts.aceHighlightActiveLine),void 0!==b.opts.aceReadOnly&&d.setReadOnly(b.opts.aceReadOnly),this.core.editor().on("sourceToggle",a.proxy(this.syntax.sourceCallback,this)),d.on("change",function(a){b.source.$textarea.val(d.getValue())}),void 0!==b.opts.aceFontSize&&editorDOM.css({fontSize:b.opts.aceFontSize}),b.opts.aceLoaded=!0},sourceCallback:function(b,c){var d=this,e=d.syntax.editor;if(c.sourceMode){var f=d.source.$textarea.height();d.source.$textarea.hide(),e.setValue(d.source.$textarea.val()),d.syntax.prettyContent.show().height(f),e.resize()}else{var g=a(document.getElementById("redactor__modx-code-pretty-content"+d.uuid));d.insert.set(e.getValue(),!1),g.hide()}}}}}(jQuery);