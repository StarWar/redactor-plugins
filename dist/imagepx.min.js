if(!RedactorPlugins)var RedactorPlugins={};!function(a){RedactorPlugins.imagepx=function(){return{init:function(){this.modal.addCallback("imageEdit",a.proxy(this.imagepx.imageEdit,this))},imageEdit:function(){function b(b){g.val()?(k.width(g.val()),j=!0):k.width(""),h.val()?(k.height(h.val()),j=!0):k.height(""),j&&!n&&a(".redactor-modal-close-btn")[0]&&(n=!0),b?(a("#redactor-modal-overlay").addClass("preview"),a("#redactor-modal").css({background:"rgba(255,255,255,0.667)"}).find("#redactor-modal-image-edit").css({background:"transparent"}),a("#redactor-modal-overlay").css({backgroundImage:"url("+k.attr("src")+")",backgroundSize:(g.val()?a.isNumeric(g.val())?g.val()+"px":g.val():"auto")+" "+(h.val()?a.isNumeric(h.val())?h.val()+"px":h.val():"auto")})):(a("#redactor-modal-overlay").removeClass("preview"),a("#redactor-modal").css({background:f[0]}).find("#redactor-modal-image-edit").css({background:f[1]}),a("#redactor-modal-overlay").css({backgroundImage:"",backgroundSize:""}))}function c(){_t=l.clone(),k.replaceWith(_t),k=null,k=_t,k.attr("style",m).css({opacity:""}),d.code.sync(),d.observe.load()}var d=this,e=a("#redactor-modal-body > section").append(document.createElement("hr")).append(a(document.createElement("div")).addClass("image-edit-dimensions")).find(".image-edit-dimensions"),f=[a("#redactor-modal").css("background"),a("#redactor-modal-image-edit").css("background")],g=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","x").attr("name","redactor-imageEdit-image-width").attr("id","redactor-imageEdit-image-width"),h=a(document.createElement("input")).attr("type","text").attr("min","0").attr("maxlength","8").attr("pattern","d+(px|%|)").attr("data-redactor-deminsion-axis","y").attr("name","redactor-imageEdit-image-height").attr("id","redactor-imageEdit-image-height"),i=a(document.createElement("input")).attr("disabled","disabled").attr("type","checkbox").attr("id","redactor-imageEdit-image-preview");e.append([a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-width").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-width").text(this.opts.curLang.width||"Width"),g),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-height").append(a(document.createElement("label")).attr("for","redactor-imageEdit-image-height").text(this.opts.curLang.height||"Height"),h),a(document.createElement("div")).addClass("option").addClass("redactor-imageEdit-image-preview").append(i,a(document.createElement("label")).attr("for","redactor-imageEdit-image-preview").text(this.opts.curLang.previewDimensions||"Preview Dimensions"))]);var j,k=a("#redactor-image-box").children("img"),l=(k.parent(),k.clone().css("opacity","")),m=k.attr("style")||"",n=(a("#image-edit-dimensions").addClass("scalable"),!1);k.prop("style").width&&g.val(k.prop("style").width),k.prop("style").height&&h.val(k.prop("style").height),a.each([g,h],function(){a(this).on("change keyup",function(){g.val()||h.val()?i.removeAttr("disabled"):i.attr("disabled","disabled"),b(i.is(":checked"))})}),i.on("change",function(){var c=a(this).is(":checked");b(c)}),d.$modalClose.on("click.redactor-modal",a.proxy(function(){c()},this)),a("#redactor-modal").click(function(b){a(b.target).hasClass("redactor-modal-close-btn")&&c()})}}}}(jQuery);